{"ast":null,"code":"import _objectSpread from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';var useApi=function useApi(options){var _React$useState=React.useState(options),_React$useState2=_slicedToArray(_React$useState,2),apiOptions=_React$useState2[0],setApiOptions=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),dataBound=_React$useState4[0],setDataBound=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),items=_React$useState6[0],setItems=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isLoading=_React$useState8[0],setIsloading=_React$useState8[1];var resolve=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Promise.resolve(res.json()).then(function(data){var responsItems=[];if(Array.isArray(data)){responsItems=JSON.parse(JSON.stringify(data));setItems(responsItems);return;}var item=JSON.parse(JSON.stringify(data));responsItems.push(item);setItems(responsItems);});setDataBound(true);case 2:case\"end\":return _context.stop();}}},_callee);}));return function resolve(_x){return _ref.apply(this,arguments);};}();var get=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(options!==undefined){setApiOptions(_objectSpread(_objectSpread({},options),apiOptions));}setIsloading(true);_context3.next=4;return fetch(apiOptions.serviceUri,{method:'GET',mode:'cors',headers:{\"content-type\":\"application/json\"}}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(res.status===200){resolve(res);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}()).finally(function(){setIsloading(false);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function get(_x2){return _ref2.apply(this,arguments);};}();var post=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(options){var _options$serviceUri;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setIsloading(true);_context5.next=3;return fetch((_options$serviceUri=options===null||options===void 0?void 0:options.serviceUri)!==null&&_options$serviceUri!==void 0?_options$serviceUri:\"\",{method:'POST',mode:'cors',body:JSON.stringify(options===null||options===void 0?void 0:options.params),headers:{\"Content-Type\":\"application/json\"}}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(res.status===200){}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref5.apply(this,arguments);};}()).finally(function(){setIsloading(false);});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function post(_x4){return _ref4.apply(this,arguments);};}();var unbindData=function unbindData(){setItems([]);};React.useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return get();case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function fetchData(){return _ref6.apply(this,arguments);};}();if(apiOptions.params===null){fetchData();}},[]);var result={items:items,isLoading:isLoading,dataBound:dataBound,get:get,post:post,unbindData:unbindData};return result;};export default useApi;","map":{"version":3,"sources":["D:/Development/WorkFolder/FamilyButtler/Family-Buttler/Web-App/web-app/src/_hooks/useApi.ts"],"names":["React","useApi","options","useState","apiOptions","setApiOptions","dataBound","setDataBound","items","setItems","isLoading","setIsloading","resolve","res","Promise","json","then","data","responsItems","Array","isArray","JSON","parse","stringify","item","push","get","undefined","fetch","serviceUri","method","mode","headers","status","finally","post","body","params","unbindData","useEffect","fetchData","result"],"mappings":"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","sourcesContent":["import React from 'react'\r\n\r\nexport interface IApiOptions{\r\n    serviceUri: string\r\n    method?: 'GET'|'POST'\r\n    params?: any | null\r\n}\r\n\r\ninterface IApiResult<TItem>{\r\n    items: TItem[]\r\n    isLoading: boolean\r\n    dataBound: boolean\r\n    unbindData: () => void\r\n    get: (options?: IApiOptions) => Promise<void>\r\n    post: (options?: IApiOptions) => Promise<void>\r\n}\r\n\r\nconst useApi = <TItem>(options: IApiOptions) : IApiResult<TItem> => {\r\n\r\n    const [apiOptions, setApiOptions] = React.useState<IApiOptions>(options)\r\n    const [dataBound, setDataBound] = React.useState<boolean>(false)\r\n    const [items, setItems] = React.useState<TItem[]>([])\r\n    const [isLoading, setIsloading] = React.useState<boolean>(false)\r\n   \r\n\r\n    const resolve = async (res: Response) =>{\r\n\r\n        Promise.resolve(res.json())\r\n        .then((data) =>{\r\n\r\n            var responsItems = [] as TItem[]\r\n\r\n            if(Array.isArray(data)){\r\n                responsItems = JSON.parse(JSON.stringify(data))\r\n            \r\n                setItems(responsItems)\r\n\r\n                return\r\n            }\r\n           \r\n            var item: TItem = JSON.parse(JSON.stringify(data))\r\n\r\n            responsItems.push(item)\r\n\r\n            setItems(responsItems)\r\n        });\r\n\r\n        setDataBound(true)\r\n    }\r\n\r\n    const get = async (options?: IApiOptions) =>{\r\n\r\n        if(options !== undefined){\r\n            setApiOptions({...options, ...apiOptions})\r\n        }\r\n        \r\n        setIsloading(true)\r\n        await fetch(apiOptions.serviceUri, {method: 'GET', mode: 'cors', headers: {\"content-type\":\"application/json\"}})\r\n        .then(async (res) => {\r\n\r\n            if(res.status === 200){\r\n\r\n              resolve(res);\r\n\r\n            }\r\n        }).finally(() =>{\r\n            \r\n            setIsloading(false)\r\n        })\r\n        \r\n    }\r\n\r\n    const post = async (options?: IApiOptions) => {\r\n\r\n        setIsloading(true)\r\n\r\n        await fetch(options?.serviceUri?? \"\", {method: 'POST', mode:'cors', body: JSON.stringify(options?.params), headers: {\"Content-Type\":\"application/json\"}})\r\n\r\n        .then(async (res) =>{\r\n            if(res.status === 200){\r\n\r\n            }\r\n        }).finally(() =>{\r\n            setIsloading(false)\r\n        })\r\n    }\r\n\r\n    const unbindData = () =>{\r\n        setItems([])\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = async () => {\r\n            \r\n            await get();\r\n        }\r\n\r\n        if(apiOptions.params === null){\r\n\r\n            fetchData();\r\n        }\r\n\r\n    },[])\r\n\r\n    const result: IApiResult<TItem> = {\r\n        items,\r\n        isLoading,\r\n        dataBound,\r\n        get,\r\n        post,\r\n        unbindData\r\n        \r\n    }\r\n    \r\n\r\n    return result;\r\n}\r\n\r\nexport default useApi\r\n\r\n"]},"metadata":{},"sourceType":"module"}