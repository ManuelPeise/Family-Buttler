{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _objectSpread from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _regeneratorRuntime from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import MenuInputComponent from'./MenueInputComponent';import{MenuTypeEnum}from'../../_enums/menuEnums';import{Grid,MenuItem,Button}from'@material-ui/core';import IngrdientList from'./IngredientList';import SubHeaderBar from'../../_components/_appBars/subHeader';import ImageInput from'../../_components/_inputs/ImageInput';import noImg from'../../img/no-pic.png';import{useDispatch,useSelector}from'react-redux';import{SetMenu}from'../../_redux/_appStateStore/appStoreAccessor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MenuContainer=function MenuContainer(props){var _cookkingbookState$se12,_cookkingbookState$se13,_cookkingbookState$se14,_cookkingbookState$se15,_cookkingbookState$se16,_cookkingbookState$se17,_cookkingbookState$se18,_cookkingbookState$se19;var values=props.values,config=props.config,menuCollection=props.menuCollection,handleSave=props.handleSave;var cookkingbookState=useSelector(function(state){return state.cookingBook;});var dispatch=useDispatch();var existingMenuNames=React.useMemo(function(){return menuCollection.map(function(menu){return menu.name.toLocaleLowerCase();});},[menuCollection]);var menuNameAlreadyExists=React.useMemo(function(){return existingMenuNames.findIndex(function(x){var _cookkingbookState$se,_cookkingbookState$se2;return x.normalize()===((_cookkingbookState$se=cookkingbookState.selectedMenu)===null||_cookkingbookState$se===void 0?void 0:(_cookkingbookState$se2=_cookkingbookState$se.name)===null||_cookkingbookState$se2===void 0?void 0:_cookkingbookState$se2.toLocaleLowerCase().normalize());})!==-1;},[cookkingbookState.selectedMenu.name,existingMenuNames]);var isValidMenu=React.useMemo(function(){var _cookkingbookState$se3,_cookkingbookState$se4,_cookkingbookState$se5,_cookkingbookState$se6,_cookkingbookState$se7;return((_cookkingbookState$se3=cookkingbookState.selectedMenu)===null||_cookkingbookState$se3===void 0?void 0:_cookkingbookState$se3.name)!==\"\"&&menuNameAlreadyExists===false&&((_cookkingbookState$se4=cookkingbookState.selectedMenu)===null||_cookkingbookState$se4===void 0?void 0:_cookkingbookState$se4.description)!==\"\"&&((_cookkingbookState$se5=cookkingbookState.selectedMenu)===null||_cookkingbookState$se5===void 0?void 0:_cookkingbookState$se5.menuType)!==MenuTypeEnum.None&&((_cookkingbookState$se6=cookkingbookState.selectedMenu)===null||_cookkingbookState$se6===void 0?void 0:(_cookkingbookState$se7=_cookkingbookState$se6.ingredients)===null||_cookkingbookState$se7===void 0?void 0:_cookkingbookState$se7.length)>0;},[cookkingbookState.selectedMenu,menuNameAlreadyExists]);var disabled=React.useMemo(function(){if(config.componentKey==='add'){return isValidMenu===false;}if(config.componentKey==='edit'){var _cookkingbookState$se8;if(((_cookkingbookState$se8=cookkingbookState.selectedMenu)===null||_cookkingbookState$se8===void 0?void 0:_cookkingbookState$se8.name)===undefined){return true;}return cookkingbookState.selectedMenu===cookkingbookState.originalMenu;}return true;},[config,cookkingbookState,isValidMenu]);var onTitleChanged=React.useCallback(function(name){var data=_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{name:name});dispatch(SetMenu(data));},[cookkingbookState.selectedMenu,dispatch]);var onDescriptionChanged=React.useCallback(function(description){var data=_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{description:description});dispatch(SetMenu(data));},[cookkingbookState.selectedMenu,dispatch]);var onHowToChanged=React.useCallback(function(howTo){var data=_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{howTo:howTo});dispatch(SetMenu(data));},[cookkingbookState.selectedMenu,dispatch]);var onMenuTypeChanged=React.useCallback(function(value){var data=_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{menuType:value});dispatch(SetMenu(data));},[cookkingbookState.selectedMenu,dispatch]);var onIngredientChanged=React.useCallback(function(ingredients){dispatch(SetMenu(_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{ingredients:ingredients})));},[cookkingbookState.selectedMenu,dispatch]);var menuTypes=React.useMemo(function(){var elements=[];elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"-1\",value:-1,selected:cookkingbookState.selectedMenu.menuType===MenuTypeEnum.None,children:values.select},-1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"0\",value:0,selected:cookkingbookState.selectedMenu.menuType===MenuTypeEnum.Pasta,children:values.recipePasta},0));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"1\",value:1,selected:cookkingbookState.selectedMenu.menuType===MenuTypeEnum.Meat,children:values.recipeMeat},1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"2\",value:2,selected:cookkingbookState.selectedMenu.menuType===MenuTypeEnum.Soup,children:values.recipeSoup},2));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"3\",value:3,selected:cookkingbookState.selectedMenu.menuType===MenuTypeEnum.Pastries,children:values.recipePastries},3));return elements;},[cookkingbookState.selectedMenu.menuType,values]);var unitTypes=React.useMemo(function(){var elements=[];elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"-1\",value:-1,children:values.select},-1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"3\",value:3,children:values.unitGram},3));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"2\",value:2,children:values.unitKilo},2));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"0\",value:0,children:values.unitLiter},0));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"1\",value:1,children:values.unitMilliliters},1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"7\",value:7,children:values.unitPiece},7));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"4\",value:4,children:values.unitTablespoon},4));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"5\",value:5,children:values.unitTeaspoon},5));return elements;},[values]);var handleAddIngredient=React.useCallback(function(){var _cookkingbookState$se9,_cookkingbookState$se10,_cookkingbookState$se11;var update=_objectSpread(_objectSpread({},cookkingbookState.selectedMenu),{},{ingredients:(_cookkingbookState$se9=cookkingbookState.selectedMenu.ingredients)!==null&&_cookkingbookState$se9!==void 0?_cookkingbookState$se9:[]});update.ingredients.push({id:(_cookkingbookState$se10=cookkingbookState.selectedMenu)===null||_cookkingbookState$se10===void 0?void 0:(_cookkingbookState$se11=_cookkingbookState$se10.ingredients)===null||_cookkingbookState$se11===void 0?void 0:_cookkingbookState$se11.length});dispatch(SetMenu(update));},[cookkingbookState.selectedMenu,dispatch]);var onCancel=React.useCallback(function(){dispatch(SetMenu(cookkingbookState.originalMenu));},[cookkingbookState,dispatch]);var onSave=React.useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return handleSave(cookkingbookState.selectedMenu).then(function(){dispatch(SetMenu({}));});case 2:case\"end\":return _context.stop();}}},_callee);})),[cookkingbookState,handleSave,dispatch]);return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,justifyContent:\"center\",xs:11,xl:11,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,container:true,children:[/*#__PURE__*/_jsx(SubHeaderBar,{title:values.recipe,variant:\"h5\"}),/*#__PURE__*/_jsxs(Grid,{xs:12,sm:8,item:true,children:[/*#__PURE__*/_jsx(MenuInputComponent,{label:values.name,value:(_cookkingbookState$se12=(_cookkingbookState$se13=cookkingbookState.selectedMenu)===null||_cookkingbookState$se13===void 0?void 0:_cookkingbookState$se13.name)!==null&&_cookkingbookState$se12!==void 0?_cookkingbookState$se12:\"\",fullWidth:true,isReadonly:config.isReadOnly&&(config.componentKey==='view'||config.componentKey==='edit'),hasError:menuNameAlreadyExists&&config.componentKey==='add',errorText:menuNameAlreadyExists&&config.componentKey==='add'?\"Menu already exists!\":\"\",onValueChanged:onTitleChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.description,isMultiRow:true,maxRows:5,fullWidth:true,value:(_cookkingbookState$se14=(_cookkingbookState$se15=cookkingbookState.selectedMenu)===null||_cookkingbookState$se15===void 0?void 0:_cookkingbookState$se15.description)!==null&&_cookkingbookState$se14!==void 0?_cookkingbookState$se14:\"\",isReadonly:config.isReadOnly,onValueChanged:onDescriptionChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.hoTo,isMultiRow:true,maxRows:20,fullWidth:true,value:(_cookkingbookState$se16=(_cookkingbookState$se17=cookkingbookState.selectedMenu)===null||_cookkingbookState$se17===void 0?void 0:_cookkingbookState$se17.howTo)!==null&&_cookkingbookState$se16!==void 0?_cookkingbookState$se16:\"\",isReadonly:config.isReadOnly,onValueChanged:onHowToChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.menuType,isMultiRow:true,maxRows:5,fullWidth:true,value:(_cookkingbookState$se18=(_cookkingbookState$se19=cookkingbookState.selectedMenu)===null||_cookkingbookState$se19===void 0?void 0:_cookkingbookState$se19.menuType)!==null&&_cookkingbookState$se18!==void 0?_cookkingbookState$se18:-1,isReadonly:config.isReadOnly,hasSelect:true,selectElements:menuTypes,onSelectChanged:onMenuTypeChanged})]}),/*#__PURE__*/_jsx(Grid,{xs:12,sm:4,item:true,children:/*#__PURE__*/_jsx(ImageInput,{isReadOnly:config.isReadOnly,width:200,height:200,noImageSrc:noImg,menu:cookkingbookState.selectedMenu})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(IngrdientList,{title:values.addIngredient,values:values,ingredients:cookkingbookState.selectedMenu.ingredients,unitTypes:unitTypes,isReadOnly:config.isReadOnly,onIngredientsChanged:onIngredientChanged,handleAddIngredient:handleAddIngredient})}),!config.isReadOnly&&/*#__PURE__*/_jsxs(Grid,{justifyContent:\"flex-end\",style:{margin:'2vw'},container:true,children:[/*#__PURE__*/_jsx(Button,{disabled:disabled,onClick:onCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{disabled:disabled,onClick:onSave,children:\"Save\"})]})]});};export default MenuContainer;","map":{"version":3,"sources":["D:/Development/WorkFolder/FamilyButtler/Family-Buttler/Web-App/web-app/src/_pages/_cookingBook/MenuContainer.tsx"],"names":["React","MenuInputComponent","MenuTypeEnum","Grid","MenuItem","Button","IngrdientList","SubHeaderBar","ImageInput","noImg","useDispatch","useSelector","SetMenu","MenuContainer","props","values","config","menuCollection","handleSave","cookkingbookState","state","cookingBook","dispatch","existingMenuNames","useMemo","map","menu","name","toLocaleLowerCase","menuNameAlreadyExists","findIndex","x","normalize","selectedMenu","isValidMenu","description","menuType","None","ingredients","length","disabled","componentKey","undefined","originalMenu","onTitleChanged","useCallback","data","onDescriptionChanged","onHowToChanged","howTo","onMenuTypeChanged","value","onIngredientChanged","menuTypes","elements","push","select","Pasta","recipePasta","Meat","recipeMeat","Soup","recipeSoup","Pastries","recipePastries","unitTypes","unitGram","unitKilo","unitLiter","unitMilliliters","unitPiece","unitTablespoon","unitTeaspoon","handleAddIngredient","update","id","onCancel","onSave","then","recipe","isReadOnly","hoTo","addIngredient","margin"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport MenuInputComponent from './MenueInputComponent'\r\nimport {IIngredient, IMenu} from '../../_interfaces/IMenu'\r\nimport { MenuTypeEnum } from '../../_enums/menuEnums'\r\nimport { Grid, MenuItem, Button } from '@material-ui/core'\r\nimport IngrdientList from './IngredientList'\r\nimport SubHeaderBar from '../../_components/_appBars/subHeader'\r\nimport { ICookingBookValues } from '../../_interfaces/ICookingBookValues'\r\nimport { IMenuLayoutConfig } from './interfaces/IMenueLayoutConfig'\r\nimport ImageInput from '../../_components/_inputs/ImageInput'\r\nimport noImg from '../../img/no-pic.png'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { IAppState, ICookingBookState } from '../../_interfaces/IAppState'\r\nimport { SetMenu } from '../../_redux/_appStateStore/appStoreAccessor'\r\n\r\ninterface IProps{\r\n    values: ICookingBookValues\r\n    config: IMenuLayoutConfig\r\n    menuCollection: IMenu[]\r\n    handleSave: (menu: IMenu) => Promise<void>\r\n}\r\n\r\nconst MenuContainer: React.FC<IProps> = (props) =>{\r\n\r\n    const {values, config, menuCollection, handleSave} = props\r\n\r\n    const cookkingbookState = useSelector<IAppState, ICookingBookState>(state => state.cookingBook)\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const existingMenuNames = React.useMemo(() =>{\r\n        return menuCollection.map((menu) =>{\r\n            return menu.name.toLocaleLowerCase()\r\n        })\r\n    },[menuCollection])\r\n\r\n    const menuNameAlreadyExists = React.useMemo(() =>{\r\n        return existingMenuNames.findIndex(x => x.normalize() === cookkingbookState.selectedMenu?.name?.toLocaleLowerCase().normalize()) !== -1\r\n    },[cookkingbookState.selectedMenu.name, existingMenuNames])\r\n\r\n    const isValidMenu = React.useMemo(() =>{\r\n        return(\r\n            cookkingbookState.selectedMenu?.name !== \"\" && menuNameAlreadyExists === false\r\n            && cookkingbookState.selectedMenu?.description !== \"\"\r\n            && cookkingbookState.selectedMenu?.menuType !== MenuTypeEnum.None\r\n            && cookkingbookState.selectedMenu?.ingredients?.length > 0\r\n        )\r\n    },[cookkingbookState.selectedMenu, menuNameAlreadyExists])\r\n\r\n    const disabled = React.useMemo(() =>{\r\n        if(config.componentKey === 'add'){\r\n            return isValidMenu === false\r\n        }\r\n    \r\n        if(config.componentKey === 'edit'){\r\n\r\n            if(cookkingbookState.selectedMenu?.name === undefined){\r\n                return true\r\n            }\r\n\r\n            return (cookkingbookState.selectedMenu === cookkingbookState.originalMenu)\r\n        }\r\n\r\n        return true\r\n       \r\n    },[config, cookkingbookState, isValidMenu])\r\n\r\n    const onTitleChanged = React.useCallback((name: string) =>{\r\n        const data: IMenu = {...cookkingbookState.selectedMenu,  name: name}\r\n       \r\n        dispatch(SetMenu(data))\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const onDescriptionChanged = React.useCallback((description: string) =>{\r\n        const data: IMenu = {...cookkingbookState.selectedMenu, description}\r\n        dispatch(SetMenu(data))\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const onHowToChanged = React.useCallback((howTo: string) =>{\r\n        const data: IMenu = {...cookkingbookState.selectedMenu, howTo}\r\n        dispatch(SetMenu(data))\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const onMenuTypeChanged = React.useCallback((value: number) =>{\r\n        const data: IMenu = {...cookkingbookState.selectedMenu, menuType: value}\r\n        dispatch(SetMenu(data))\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const onIngredientChanged = React.useCallback((ingredients: IIngredient[]) =>{\r\n        dispatch(SetMenu({...cookkingbookState.selectedMenu, ingredients: ingredients}))\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const menuTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1} selected={cookkingbookState.selectedMenu.menuType === MenuTypeEnum.None}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0} selected={cookkingbookState.selectedMenu.menuType === MenuTypeEnum.Pasta}>{values.recipePasta}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1} selected={cookkingbookState.selectedMenu.menuType === MenuTypeEnum.Meat}>{values.recipeMeat}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2} selected={cookkingbookState.selectedMenu.menuType === MenuTypeEnum.Soup}>{values.recipeSoup}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3} selected={cookkingbookState.selectedMenu.menuType === MenuTypeEnum.Pastries}>{values.recipePastries}</MenuItem>)\r\n\r\n        return elements\r\n    },[cookkingbookState.selectedMenu.menuType, values])\r\n\r\n    const unitTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3}>{values.unitGram}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2}>{values.unitKilo}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0}>{values.unitLiter}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1}>{values.unitMilliliters}</MenuItem>)\r\n        elements.push(<MenuItem key={7} id = '7' value={7}>{values.unitPiece}</MenuItem>)\r\n        elements.push(<MenuItem key={4} id = '4' value={4}>{values.unitTablespoon}</MenuItem>)\r\n        elements.push(<MenuItem key={5} id = '5' value={5}>{values.unitTeaspoon}</MenuItem>)\r\n\r\n        return elements\r\n    },[values])\r\n\r\n    const handleAddIngredient = React.useCallback(() => {\r\n        const update: IMenu = {...cookkingbookState.selectedMenu, ingredients: cookkingbookState.selectedMenu.ingredients?? [] as IIngredient[]}\r\n        \r\n        update.ingredients.push({id: cookkingbookState.selectedMenu?.ingredients?.length} as IIngredient)\r\n        dispatch(SetMenu(update))\r\n\r\n    },[cookkingbookState.selectedMenu, dispatch])\r\n\r\n    const onCancel = React.useCallback(() =>{\r\n        dispatch(SetMenu(cookkingbookState.originalMenu))\r\n    },[cookkingbookState, dispatch])\r\n\r\n    const onSave = React.useCallback(async () => {\r\n        await handleSave(cookkingbookState.selectedMenu).then(() =>{\r\n            dispatch(SetMenu({} as IMenu))\r\n        })\r\n        \r\n    },[cookkingbookState, handleSave, dispatch])\r\n\r\n    return(\r\n        <Grid\r\n            container\r\n            item\r\n            justifyContent='center'\r\n            xs={11}\r\n            xl={11}>\r\n            <Grid\r\n                item\r\n                xs = {12}\r\n                container>\r\n                <SubHeaderBar title={values.recipe} variant='h5'/>\r\n                <Grid\r\n                    xs={12}\r\n                    sm={8}\r\n                    item>\r\n                        <MenuInputComponent\r\n                                    label={values.name}\r\n                                    value={cookkingbookState.selectedMenu?.name?? \"\"}\r\n                                    fullWidth={true} \r\n                                    isReadonly={config.isReadOnly && (config.componentKey === 'view' || config.componentKey === 'edit')}\r\n                                    hasError={menuNameAlreadyExists && config.componentKey === 'add'}\r\n                                    errorText={menuNameAlreadyExists && config.componentKey === 'add' ? \"Menu already exists!\" : \"\"}\r\n                                    onValueChanged={onTitleChanged} />\r\n                        <MenuInputComponent\r\n                                    label={values.description}\r\n                                    isMultiRow={true}\r\n                                    maxRows={5}\r\n                                    fullWidth={true} \r\n                                    value={cookkingbookState.selectedMenu?.description?? \"\"} \r\n                                    isReadonly={config.isReadOnly}\r\n                                    onValueChanged={onDescriptionChanged}/>\r\n                        <MenuInputComponent\r\n                                    label={values.hoTo}\r\n                                    isMultiRow={true}\r\n                                    maxRows={20}\r\n                                    fullWidth={true} \r\n                                    value={cookkingbookState.selectedMenu?.howTo?? \"\"} \r\n                                    isReadonly={config.isReadOnly}\r\n                                    onValueChanged={onHowToChanged}/>\r\n                        <MenuInputComponent\r\n                                    label={values.menuType}\r\n                                    isMultiRow={true}\r\n                                    maxRows={5}\r\n                                    fullWidth={true} \r\n                                    value={cookkingbookState.selectedMenu?.menuType ?? -1} \r\n                                    isReadonly={config.isReadOnly}\r\n                                    hasSelect={true}\r\n                                    selectElements={menuTypes}\r\n                                    onSelectChanged={onMenuTypeChanged}/>\r\n                </Grid>\r\n                <Grid\r\n                    xs={12}\r\n                    sm={4}\r\n                    item>\r\n                    <ImageInput \r\n                        isReadOnly={config.isReadOnly}\r\n                        width={200}\r\n                        height={200}\r\n                        noImageSrc={noImg}\r\n                        menu={cookkingbookState.selectedMenu}\r\n                    />\r\n\r\n                </Grid>\r\n            </Grid>\r\n            <Grid\r\n                item\r\n                xs={12}>\r\n                    <IngrdientList\r\n                        title={values.addIngredient} \r\n                        values={values} \r\n                        ingredients={cookkingbookState.selectedMenu.ingredients}\r\n                        unitTypes={unitTypes}\r\n                        isReadOnly= {config.isReadOnly}\r\n                        onIngredientsChanged={onIngredientChanged}\r\n                        handleAddIngredient={handleAddIngredient}/>\r\n            </Grid>\r\n            {!config.isReadOnly && (\r\n            <Grid\r\n                justifyContent='flex-end'\r\n                style={{margin: '2vw'}}\r\n                container>\r\n                    <Button disabled={disabled} onClick={onCancel}>Cancel</Button>\r\n                    <Button disabled={disabled} onClick={onSave}>Save</Button>\r\n            </Grid>\r\n            )}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default MenuContainer  "]},"metadata":{},"sourceType":"module"}