{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\src\\\\_pages\\\\_cookingBook\\\\MenuContainer.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport MenuInputComponent from './MenueInputComponent';\nimport { MenuTypeEnum } from '../../_enums/menuEnums';\nimport { Grid, MenuItem, Button } from '@material-ui/core';\nimport IngrdientList from './IngredientList';\nimport SubHeaderBar from '../../_components/_appBars/subHeader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MenuContainer = props => {\n  _s();\n\n  var _menu$name2, _menu$description, _menu$howTo, _menu$menuType;\n\n  const {\n    selectedMenu,\n    values,\n    config,\n    menuCollection,\n    handleSave\n  } = props;\n  const [menu, setMenu] = React.useState(selectedMenu);\n  React.useEffect(() => {\n    setMenu(selectedMenu);\n  }, [setMenu, selectedMenu]);\n  const original = React.useMemo(() => {\n    return selectedMenu;\n  }, [selectedMenu]);\n  const existingMenuNames = React.useMemo(() => {\n    return menuCollection.map(menu => {\n      return menu.name.toLocaleLowerCase();\n    });\n  }, [menuCollection]);\n  const menuNameAlreadyExists = React.useMemo(() => {\n    return existingMenuNames.findIndex(x => {\n      var _menu$name;\n\n      return x.normalize() === (menu === null || menu === void 0 ? void 0 : (_menu$name = menu.name) === null || _menu$name === void 0 ? void 0 : _menu$name.toLocaleLowerCase().normalize());\n    }) !== -1;\n  }, [menu.name, existingMenuNames]);\n\n  const isEqualIngrdient = (original, modified) => {\n    return original.amount === modified.amount && original.name === modified.name && original.unit === modified.unit;\n  };\n\n  const ingredientsEqual = React.useCallback(() => {\n    var _menu$ingredients, _selectedMenu$ingredi;\n\n    let isEqual = false;\n\n    if ((menu === null || menu === void 0 ? void 0 : (_menu$ingredients = menu.ingredients) === null || _menu$ingredients === void 0 ? void 0 : _menu$ingredients.length) === 0) {\n      return true;\n    }\n\n    const equal = selectedMenu === null || selectedMenu === void 0 ? void 0 : (_selectedMenu$ingredi = selectedMenu.ingredients) === null || _selectedMenu$ingredi === void 0 ? void 0 : _selectedMenu$ingredi.map((ingredient, index) => {\n      return isEqualIngrdient(original.ingredients[index], ingredient);\n    });\n    console.log(equal);\n    return isEqual;\n  }, [selectedMenu === null || selectedMenu === void 0 ? void 0 : selectedMenu.ingredients, original === null || original === void 0 ? void 0 : original.ingredients]);\n  const disabled = React.useMemo(() => {\n    return menu.name === selectedMenu.name && menu.description === selectedMenu.description && menu.howTo === selectedMenu.howTo && menu.menuType === selectedMenu.menuType && ingredientsEqual();\n  }, [menu, selectedMenu, ingredientsEqual]);\n  const onTitleChanged = React.useCallback(name => {\n    const data = { ...menu,\n      name\n    };\n    setMenu(data);\n  }, [menu]);\n  const onDescriptionChanged = React.useCallback(description => {\n    const data = { ...menu,\n      description\n    };\n    setMenu(data);\n  }, [menu]);\n  const onHowToChanged = React.useCallback(howTo => {\n    const data = { ...menu,\n      howTo\n    };\n    setMenu(data);\n  }, [menu]);\n  const onMenuTypeChanged = React.useCallback(value => {\n    const data = { ...menu,\n      menuType: value\n    };\n    setMenu(data);\n  }, [menu]);\n  const onIngredientChanged = React.useCallback(ingredients => {\n    setMenu({ ...menu,\n      ...ingredients\n    });\n  }, [menu, setMenu]);\n  const menuTypes = React.useMemo(() => {\n    const elements = [];\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"-1\",\n      value: -1,\n      selected: menu.menuType === MenuTypeEnum.None,\n      children: values.select\n    }, -1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"0\",\n      value: 0,\n      selected: menu.menuType === MenuTypeEnum.Pasta,\n      children: values.recipePasta\n    }, 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"1\",\n      value: 1,\n      selected: menu.menuType === MenuTypeEnum.Meat,\n      children: values.recipeMeat\n    }, 1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"2\",\n      value: 2,\n      selected: menu.menuType === MenuTypeEnum.Soup,\n      children: values.recipeSoup\n    }, 2, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"3\",\n      value: 3,\n      selected: menu.menuType === MenuTypeEnum.Pastries,\n      children: values.recipePastries\n    }, 3, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }, this));\n    return elements;\n  }, [menu.menuType, values]);\n  const unitTypes = React.useMemo(() => {\n    const elements = [];\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"-1\",\n      value: -1,\n      children: values.select\n    }, -1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"3\",\n      value: 3,\n      children: values.unitGram\n    }, 3, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"2\",\n      value: 2,\n      children: values.unitKilo\n    }, 2, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"0\",\n      value: 0,\n      children: values.unitLiter\n    }, 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"1\",\n      value: 1,\n      children: values.unitMilliliters\n    }, 1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"7\",\n      value: 7,\n      children: values.unitPiece\n    }, 7, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"4\",\n      value: 4,\n      children: values.unitTablespoon\n    }, 4, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 23\n    }, this));\n    elements.push( /*#__PURE__*/_jsxDEV(MenuItem, {\n      id: \"5\",\n      value: 5,\n      children: values.unitTeaspoon\n    }, 5, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }, this));\n    return elements;\n  }, [values]);\n  const handleAddIngredient = React.useCallback(() => {\n    const update = { ...menu\n    };\n    update.ingredients.push({});\n    setMenu(update);\n  }, [menu, setMenu]);\n  const onCancel = React.useCallback(() => {\n    setMenu(original);\n  }, [original, setMenu]);\n  const onSave = React.useCallback(async () => {\n    await handleSave(menu);\n  }, [menu, handleSave]);\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    item: true,\n    justifyContent: \"center\",\n    xs: 11,\n    xl: 11,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(SubHeaderBar, {\n        title: values.recipe,\n        variant: \"h5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MenuInputComponent, {\n        label: values.name,\n        value: (_menu$name2 = menu === null || menu === void 0 ? void 0 : menu.name) !== null && _menu$name2 !== void 0 ? _menu$name2 : \"\",\n        fullWidth: true,\n        isReadonly: config.isReadOnly,\n        hasError: menuNameAlreadyExists,\n        onValueChanged: onTitleChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MenuInputComponent, {\n        label: values.description,\n        isMultiRow: true,\n        maxRows: 5,\n        fullWidth: true,\n        value: (_menu$description = menu === null || menu === void 0 ? void 0 : menu.description) !== null && _menu$description !== void 0 ? _menu$description : \"\",\n        isReadonly: config.isReadOnly,\n        onValueChanged: onDescriptionChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MenuInputComponent, {\n        label: values.hoTo,\n        isMultiRow: true,\n        maxRows: 20,\n        fullWidth: true,\n        value: (_menu$howTo = menu === null || menu === void 0 ? void 0 : menu.howTo) !== null && _menu$howTo !== void 0 ? _menu$howTo : \"\",\n        isReadonly: config.isReadOnly,\n        onValueChanged: onHowToChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MenuInputComponent, {\n        label: values.menuType,\n        isMultiRow: true,\n        maxRows: 5,\n        fullWidth: true,\n        value: (_menu$menuType = menu.menuType) !== null && _menu$menuType !== void 0 ? _menu$menuType : -1,\n        isReadonly: config.isReadOnly,\n        hasSelect: true,\n        selectElements: menuTypes,\n        onSelectChanged: onMenuTypeChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(IngrdientList, {\n        values: values,\n        ingredients: menu.ingredients,\n        unitTypes: unitTypes,\n        isReadOnly: config.isReadOnly,\n        onIngredientsChanged: onIngredientChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this), !config.isReadOnly && /*#__PURE__*/_jsxDEV(Grid, {\n      justifyContent: \"flex-end\",\n      style: {\n        margin: '2vw'\n      },\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        disabled: disabled,\n        onClick: onCancel,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: disabled && menuNameAlreadyExists,\n        onClick: onSave,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MenuContainer, \"BAGlzlT/btpOdm00sbB8ZLOAB0Q=\");\n\n_c = MenuContainer;\nexport default MenuContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuContainer\");","map":{"version":3,"sources":["D:/Development/WorkFolder/FamilyButtler/Family-Buttler/Web-App/web-app/src/_pages/_cookingBook/MenuContainer.tsx"],"names":["React","MenuInputComponent","MenuTypeEnum","Grid","MenuItem","Button","IngrdientList","SubHeaderBar","MenuContainer","props","selectedMenu","values","config","menuCollection","handleSave","menu","setMenu","useState","useEffect","original","useMemo","existingMenuNames","map","name","toLocaleLowerCase","menuNameAlreadyExists","findIndex","x","normalize","isEqualIngrdient","modified","amount","unit","ingredientsEqual","useCallback","isEqual","ingredients","length","equal","ingredient","index","console","log","disabled","description","howTo","menuType","onTitleChanged","data","onDescriptionChanged","onHowToChanged","onMenuTypeChanged","value","onIngredientChanged","menuTypes","elements","push","None","select","Pasta","recipePasta","Meat","recipeMeat","Soup","recipeSoup","Pastries","recipePastries","unitTypes","unitGram","unitKilo","unitLiter","unitMilliliters","unitPiece","unitTablespoon","unitTeaspoon","handleAddIngredient","update","onCancel","onSave","recipe","isReadOnly","hoTo","margin"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport MenuInputComponent from './MenueInputComponent'\r\nimport {IIngredient, IMenu} from '../../_interfaces/IMenu'\r\nimport { MenuTypeEnum } from '../../_enums/menuEnums'\r\nimport { Grid, MenuItem, Button } from '@material-ui/core'\r\nimport IngrdientList from './IngredientList'\r\nimport SubHeaderBar from '../../_components/_appBars/subHeader'\r\nimport { ICookingBookValues } from '../../_interfaces/ICookingBookValues'\r\nimport { IMenuLayoutConfig } from './interfaces/IMenueLayoutConfig'\r\n\r\ninterface IProps{\r\n    selectedMenu: IMenu\r\n    values: ICookingBookValues\r\n    config: IMenuLayoutConfig\r\n    menuCollection: IMenu[]\r\n    handleSave: (menu: IMenu) => Promise<void>\r\n}\r\n\r\nconst MenuContainer: React.FC<IProps> = (props) =>{\r\n\r\n    const {selectedMenu, values, config, menuCollection, handleSave} = props\r\n\r\n    const [menu, setMenu] = React.useState<IMenu>(selectedMenu)\r\n\r\n    React.useEffect(() =>{\r\n        setMenu(selectedMenu)\r\n    },[setMenu, selectedMenu])\r\n\r\n    const original = React.useMemo(() =>{\r\n        return selectedMenu\r\n    },[selectedMenu])\r\n\r\n    const existingMenuNames = React.useMemo(() =>{\r\n        return menuCollection.map((menu) =>{\r\n            return menu.name.toLocaleLowerCase()\r\n        })\r\n    },[menuCollection])\r\n\r\n    const menuNameAlreadyExists = React.useMemo(() =>{\r\n        return existingMenuNames.findIndex(x => x.normalize() === menu?.name?.toLocaleLowerCase().normalize()) !== -1\r\n    },[menu.name, existingMenuNames])\r\n\r\n    const isEqualIngrdient = (original: IIngredient, modified: IIngredient) => {\r\n        return original.amount === modified.amount && original.name === modified.name && original.unit === modified.unit\r\n    } \r\n\r\n    const ingredientsEqual = React.useCallback(() =>{\r\n        \r\n        let isEqual = false\r\n        if(menu?.ingredients?.length === 0){\r\n           return true\r\n        }\r\n        \r\n        const equal = selectedMenu?.ingredients?.map((ingredient, index) =>{\r\n\r\n            return isEqualIngrdient(original.ingredients[index], ingredient)\r\n        })\r\n        \r\n        console.log(equal)\r\n\r\n        return isEqual\r\n    },[selectedMenu?.ingredients, original?.ingredients])\r\n\r\n    const disabled = React.useMemo(() =>{\r\n        return (menu.name === selectedMenu.name\r\n            && menu.description === selectedMenu.description\r\n            && menu.howTo === selectedMenu.howTo\r\n            && menu.menuType === selectedMenu.menuType)\r\n            && ingredientsEqual()\r\n    },[menu, selectedMenu, ingredientsEqual])\r\n\r\n    const onTitleChanged = React.useCallback((name: string) =>{\r\n        const data: IMenu = {...menu, name}\r\n       \r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onDescriptionChanged = React.useCallback((description: string) =>{\r\n        const data: IMenu = {...menu, description}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onHowToChanged = React.useCallback((howTo: string) =>{\r\n        const data: IMenu = {...menu, howTo}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onMenuTypeChanged = React.useCallback((value: number) =>{\r\n        const data: IMenu = {...menu, menuType: value}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onIngredientChanged = React.useCallback((ingredients: IIngredient[]) =>{\r\n        setMenu({...menu, ...ingredients})\r\n    },[menu, setMenu])\r\n\r\n    const menuTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1} selected={menu.menuType === MenuTypeEnum.None}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0} selected={menu.menuType === MenuTypeEnum.Pasta}>{values.recipePasta}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1} selected={menu.menuType === MenuTypeEnum.Meat}>{values.recipeMeat}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2} selected={menu.menuType === MenuTypeEnum.Soup}>{values.recipeSoup}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3} selected={menu.menuType === MenuTypeEnum.Pastries}>{values.recipePastries}</MenuItem>)\r\n\r\n        return elements\r\n    },[menu.menuType, values])\r\n\r\n    const unitTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3}>{values.unitGram}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2}>{values.unitKilo}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0}>{values.unitLiter}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1}>{values.unitMilliliters}</MenuItem>)\r\n        elements.push(<MenuItem key={7} id = '7' value={7}>{values.unitPiece}</MenuItem>)\r\n        elements.push(<MenuItem key={4} id = '4' value={4}>{values.unitTablespoon}</MenuItem>)\r\n        elements.push(<MenuItem key={5} id = '5' value={5}>{values.unitTeaspoon}</MenuItem>)\r\n\r\n        return elements\r\n    },[values])\r\n\r\n    const handleAddIngredient = React.useCallback(() => {\r\n        const update: IMenu = {...menu}\r\n        update.ingredients.push({} as IIngredient)\r\n        setMenu(update)\r\n\r\n    },[menu, setMenu])\r\n\r\n    const onCancel = React.useCallback(() =>{\r\n        setMenu(original)\r\n    },[original, setMenu])\r\n\r\n    const onSave = React.useCallback(async () => {\r\n        await handleSave(menu)\r\n    },[menu, handleSave])\r\n\r\n    return(\r\n        <Grid\r\n            container\r\n            item\r\n            justifyContent='center'\r\n            xs={11}\r\n            xl={11}>\r\n            <Grid\r\n                container>\r\n                    <SubHeaderBar title={values.recipe} variant='h5'/>\r\n                    <MenuInputComponent\r\n                                label={values.name}\r\n                                value={menu?.name?? \"\"}\r\n                                fullWidth={true} \r\n                                isReadonly={config.isReadOnly}\r\n                                hasError={menuNameAlreadyExists}\r\n                                onValueChanged={onTitleChanged} />\r\n                    <MenuInputComponent\r\n                                label={values.description}\r\n                                isMultiRow={true}\r\n                                maxRows={5}\r\n                                fullWidth={true} \r\n                                value={menu?.description?? \"\"} \r\n                                isReadonly={config.isReadOnly}\r\n                                onValueChanged={onDescriptionChanged}/>\r\n                    <MenuInputComponent\r\n                                label={values.hoTo}\r\n                                isMultiRow={true}\r\n                                maxRows={20}\r\n                                fullWidth={true} \r\n                                value={menu?.howTo?? \"\"} \r\n                                isReadonly={config.isReadOnly}\r\n                                onValueChanged={onHowToChanged}/>\r\n                    <MenuInputComponent\r\n                                label={values.menuType}\r\n                                isMultiRow={true}\r\n                                maxRows={5}\r\n                                fullWidth={true} \r\n                                value={menu.menuType ?? -1} \r\n                                isReadonly={config.isReadOnly}\r\n                                hasSelect={true}\r\n                                selectElements={menuTypes}\r\n                                onSelectChanged={onMenuTypeChanged}/>\r\n            </Grid>\r\n            <Grid\r\n                item\r\n                xs={12}>\r\n                    <IngrdientList \r\n                        values={values} \r\n                        ingredients={menu.ingredients}\r\n                        unitTypes={unitTypes}\r\n                        isReadOnly= {config.isReadOnly}\r\n                        onIngredientsChanged={onIngredientChanged}/>\r\n            </Grid>\r\n            {!config.isReadOnly && (\r\n            <Grid\r\n                justifyContent='flex-end'\r\n                style={{margin: '2vw'}}\r\n                container>\r\n                    <Button disabled={disabled} onClick={onCancel}>Cancel</Button>\r\n                    <Button disabled={disabled && menuNameAlreadyExists} onClick={onSave}>Save</Button>\r\n            </Grid>\r\n            )}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default MenuContainer  "]},"metadata":{},"sourceType":"module"}