{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _objectSpread from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import MenuInputComponent from'./MenueInputComponent';import{MenuTypeEnum}from'../../_enums/menuEnums';import{Grid,MenuItem,Button}from'@material-ui/core';import IngrdientList from'./IngredientList';import SubHeaderBar from'../../_components/_appBars/subHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MenuContainer=function MenuContainer(props){var _menu$name2,_menu$description,_menu$howTo,_menu$menuType;var selectedMenu=props.selectedMenu,values=props.values,config=props.config,menuCollection=props.menuCollection,handleSave=props.handleSave;var _React$useState=React.useState(selectedMenu!==null&&selectedMenu!==void 0?selectedMenu:{}),_React$useState2=_slicedToArray(_React$useState,2),menu=_React$useState2[0],setMenu=_React$useState2[1];React.useEffect(function(){setMenu(selectedMenu);},[config.componentKey,selectedMenu,setMenu]);var original=React.useMemo(function(){return selectedMenu;},[selectedMenu]);var existingMenuNames=React.useMemo(function(){return menuCollection.map(function(menu){return menu.name.toLocaleLowerCase();});},[menuCollection]);var menuNameAlreadyExists=React.useMemo(function(){return existingMenuNames.findIndex(function(x){var _menu$name;return x.normalize()===(menu===null||menu===void 0?void 0:(_menu$name=menu.name)===null||_menu$name===void 0?void 0:_menu$name.toLocaleLowerCase().normalize());})!==-1;},[menu.name,existingMenuNames]);var isValidMenu=React.useMemo(function(){var _menu$ingredients;return menu.name!==\"\"&&menuNameAlreadyExists===false&&menu.description!==\"\"&&menu.menuType!==MenuTypeEnum.None&&(menu===null||menu===void 0?void 0:(_menu$ingredients=menu.ingredients)===null||_menu$ingredients===void 0?void 0:_menu$ingredients.length)>0;},[menu,menuNameAlreadyExists]);var isEqualIngrdient=function isEqualIngrdient(original,modified){return(original===null||original===void 0?void 0:original.amount)===(modified===null||modified===void 0?void 0:modified.amount)&&(original===null||original===void 0?void 0:original.name)===(modified===null||modified===void 0?void 0:modified.name)&&(original===null||original===void 0?void 0:original.unit)===(modified===null||modified===void 0?void 0:modified.unit);};var ingredientsEqual=React.useCallback(function(){var _original$ingredients,_equal$filter,_original$ingredients2;var equal=original===null||original===void 0?void 0:(_original$ingredients=original.ingredients)===null||_original$ingredients===void 0?void 0:_original$ingredients.map(function(ingredient,index){return isEqualIngrdient(ingredient,menu===null||menu===void 0?void 0:menu.ingredients[index]);});return(equal===null||equal===void 0?void 0:(_equal$filter=equal.filter(function(x){return x===true;}))===null||_equal$filter===void 0?void 0:_equal$filter.length)===(original===null||original===void 0?void 0:(_original$ingredients2=original.ingredients)===null||_original$ingredients2===void 0?void 0:_original$ingredients2.length);},[original===null||original===void 0?void 0:original.ingredients,menu===null||menu===void 0?void 0:menu.ingredients]);var disabled=React.useMemo(function(){if(config.componentKey==='add'){return isValidMenu===false;}if(config.componentKey==='edit'){var _menu$ingredients2;if((selectedMenu===null||selectedMenu===void 0?void 0:selectedMenu.name)===undefined){return true;}return isValidMenu===false&&menu.description===selectedMenu.description&&menu.howTo===selectedMenu.howTo&&menu.menuType===selectedMenu.menuType&&menu.ingredients[(menu===null||menu===void 0?void 0:(_menu$ingredients2=menu.ingredients)===null||_menu$ingredients2===void 0?void 0:_menu$ingredients2.length)-1].id!==-1&&ingredientsEqual()===true;}return true;},[config,menu,selectedMenu,ingredientsEqual,isValidMenu]);var onTitleChanged=React.useCallback(function(name){var data=_objectSpread(_objectSpread({},menu),{},{name:name});setMenu(data);},[menu]);var onDescriptionChanged=React.useCallback(function(description){var data=_objectSpread(_objectSpread({},menu),{},{description:description});setMenu(data);},[menu]);var onHowToChanged=React.useCallback(function(howTo){var data=_objectSpread(_objectSpread({},menu),{},{howTo:howTo});setMenu(data);},[menu]);var onMenuTypeChanged=React.useCallback(function(value){var data=_objectSpread(_objectSpread({},menu),{},{menuType:value});setMenu(data);},[menu]);var onIngredientChanged=React.useCallback(function(ingredients){setMenu(_objectSpread(_objectSpread({},menu),{},{ingredients:ingredients}));},[menu,setMenu]);var menuTypes=React.useMemo(function(){var elements=[];elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"-1\",value:-1,selected:menu.menuType===MenuTypeEnum.None,children:values.select},-1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"0\",value:0,selected:menu.menuType===MenuTypeEnum.Pasta,children:values.recipePasta},0));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"1\",value:1,selected:menu.menuType===MenuTypeEnum.Meat,children:values.recipeMeat},1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"2\",value:2,selected:menu.menuType===MenuTypeEnum.Soup,children:values.recipeSoup},2));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"3\",value:3,selected:menu.menuType===MenuTypeEnum.Pastries,children:values.recipePastries},3));return elements;},[menu.menuType,values]);var unitTypes=React.useMemo(function(){var elements=[];elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"-1\",value:-1,children:values.select},-1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"3\",value:3,children:values.unitGram},3));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"2\",value:2,children:values.unitKilo},2));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"0\",value:0,children:values.unitLiter},0));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"1\",value:1,children:values.unitMilliliters},1));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"7\",value:7,children:values.unitPiece},7));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"4\",value:4,children:values.unitTablespoon},4));elements.push(/*#__PURE__*/_jsx(MenuItem,{id:\"5\",value:5,children:values.unitTeaspoon},5));return elements;},[values]);var handleAddIngredient=React.useCallback(function(){var _menu$ingredients3;var update=_objectSpread(_objectSpread({},menu),{},{ingredients:(_menu$ingredients3=menu.ingredients)!==null&&_menu$ingredients3!==void 0?_menu$ingredients3:[]});update.ingredients.push({id:-1});setMenu(update);},[menu,setMenu]);var onCancel=React.useCallback(function(){var _original$ingredients3;setMenu(_objectSpread(_objectSpread({},original),{},{ingredients:original===null||original===void 0?void 0:(_original$ingredients3=original.ingredients)===null||_original$ingredients3===void 0?void 0:_original$ingredients3.filter(function(x){return x.id!==-1;})}));},[original,setMenu]);var onSave=React.useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return handleSave(menu);case 2:case\"end\":return _context.stop();}}},_callee);})),[menu,handleSave]);return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,justifyContent:\"center\",xs:11,xl:11,children:[/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(SubHeaderBar,{title:values.recipe,variant:\"h5\"}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.name,value:(_menu$name2=menu===null||menu===void 0?void 0:menu.name)!==null&&_menu$name2!==void 0?_menu$name2:\"\",fullWidth:true,isReadonly:config.isReadOnly&&(config.componentKey==='view'||config.componentKey==='edit'),hasError:menuNameAlreadyExists&&config.componentKey==='add',errorText:menuNameAlreadyExists&&config.componentKey==='add'?\"Menu already exists!\":\"\",onValueChanged:onTitleChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.description,isMultiRow:true,maxRows:5,fullWidth:true,value:(_menu$description=menu===null||menu===void 0?void 0:menu.description)!==null&&_menu$description!==void 0?_menu$description:\"\",isReadonly:config.isReadOnly,onValueChanged:onDescriptionChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.hoTo,isMultiRow:true,maxRows:20,fullWidth:true,value:(_menu$howTo=menu===null||menu===void 0?void 0:menu.howTo)!==null&&_menu$howTo!==void 0?_menu$howTo:\"\",isReadonly:config.isReadOnly,onValueChanged:onHowToChanged}),/*#__PURE__*/_jsx(MenuInputComponent,{label:values.menuType,isMultiRow:true,maxRows:5,fullWidth:true,value:(_menu$menuType=menu.menuType)!==null&&_menu$menuType!==void 0?_menu$menuType:-1,isReadonly:config.isReadOnly,hasSelect:true,selectElements:menuTypes,onSelectChanged:onMenuTypeChanged})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(IngrdientList,{title:values.addIngredient,values:values,ingredients:menu.ingredients,unitTypes:unitTypes,isReadOnly:config.isReadOnly,onIngredientsChanged:onIngredientChanged,handleAddIngredient:handleAddIngredient})}),!config.isReadOnly&&/*#__PURE__*/_jsxs(Grid,{justifyContent:\"flex-end\",style:{margin:'2vw'},container:true,children:[/*#__PURE__*/_jsx(Button,{disabled:disabled,onClick:onCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{disabled:disabled,onClick:onSave,children:\"Save\"})]})]});};export default MenuContainer;","map":{"version":3,"sources":["D:/Development/WorkFolder/FamilyButtler/Family-Buttler/Web-App/web-app/src/_pages/_cookingBook/MenuContainer.tsx"],"names":["React","MenuInputComponent","MenuTypeEnum","Grid","MenuItem","Button","IngrdientList","SubHeaderBar","MenuContainer","props","selectedMenu","values","config","menuCollection","handleSave","useState","menu","setMenu","useEffect","componentKey","original","useMemo","existingMenuNames","map","name","toLocaleLowerCase","menuNameAlreadyExists","findIndex","x","normalize","isValidMenu","description","menuType","None","ingredients","length","isEqualIngrdient","modified","amount","unit","ingredientsEqual","useCallback","equal","ingredient","index","filter","disabled","undefined","howTo","id","onTitleChanged","data","onDescriptionChanged","onHowToChanged","onMenuTypeChanged","value","onIngredientChanged","menuTypes","elements","push","select","Pasta","recipePasta","Meat","recipeMeat","Soup","recipeSoup","Pastries","recipePastries","unitTypes","unitGram","unitKilo","unitLiter","unitMilliliters","unitPiece","unitTablespoon","unitTeaspoon","handleAddIngredient","update","onCancel","onSave","recipe","isReadOnly","hoTo","addIngredient","margin"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport MenuInputComponent from './MenueInputComponent'\r\nimport {IIngredient, IMenu} from '../../_interfaces/IMenu'\r\nimport { MenuTypeEnum } from '../../_enums/menuEnums'\r\nimport { Grid, MenuItem, Button } from '@material-ui/core'\r\nimport IngrdientList from './IngredientList'\r\nimport SubHeaderBar from '../../_components/_appBars/subHeader'\r\nimport { ICookingBookValues } from '../../_interfaces/ICookingBookValues'\r\nimport { IMenuLayoutConfig } from './interfaces/IMenueLayoutConfig'\r\n\r\ninterface IProps{\r\n    selectedMenu: IMenu\r\n    values: ICookingBookValues\r\n    config: IMenuLayoutConfig\r\n    menuCollection: IMenu[]\r\n    handleSave: (menu: IMenu) => Promise<void>\r\n}\r\n\r\nconst MenuContainer: React.FC<IProps> = (props) =>{\r\n\r\n    const {selectedMenu, values, config, menuCollection, handleSave} = props\r\n\r\n    const [menu, setMenu] = React.useState<IMenu>(selectedMenu?? {} as IMenu)\r\n\r\n    React.useEffect(() =>{\r\n        setMenu(selectedMenu)\r\n    },[config.componentKey, selectedMenu, setMenu])\r\n\r\n    const original = React.useMemo(() =>{\r\n        return selectedMenu\r\n    },[selectedMenu])\r\n\r\n    const existingMenuNames = React.useMemo(() =>{\r\n        return menuCollection.map((menu) =>{\r\n            return menu.name.toLocaleLowerCase()\r\n        })\r\n    },[menuCollection])\r\n\r\n    const menuNameAlreadyExists = React.useMemo(() =>{\r\n        return existingMenuNames.findIndex(x => x.normalize() === menu?.name?.toLocaleLowerCase().normalize()) !== -1\r\n    },[menu.name, existingMenuNames])\r\n\r\n    const isValidMenu = React.useMemo(() =>{\r\n        return(\r\n            menu.name !== \"\" && menuNameAlreadyExists === false\r\n            && menu.description !== \"\"\r\n            && menu.menuType !== MenuTypeEnum.None\r\n            && menu?.ingredients?.length > 0\r\n        )\r\n    },[menu, menuNameAlreadyExists])\r\n\r\n    const isEqualIngrdient = (original: IIngredient, modified: IIngredient) => {\r\n        return original?.amount === modified?.amount && original?.name === modified?.name && original?.unit === modified?.unit\r\n    } \r\n\r\n    const ingredientsEqual = React.useCallback(() =>{\r\n        \r\n        const equal = original?.ingredients?.map((ingredient, index) =>{\r\n\r\n            return isEqualIngrdient(ingredient, menu?.ingredients[index])\r\n        })\r\n        \r\n        return equal?.filter(x => x === true)?.length === original?.ingredients?.length\r\n\r\n    },[original?.ingredients, menu?.ingredients])\r\n\r\n    const disabled = React.useMemo(() =>{\r\n\r\n        if(config.componentKey === 'add'){\r\n            return isValidMenu === false\r\n        }\r\n    \r\n        if(config.componentKey === 'edit'){\r\n\r\n            if(selectedMenu?.name === undefined){\r\n                return true\r\n            }\r\n\r\n            return (isValidMenu === false\r\n            && menu.description === selectedMenu.description\r\n            && menu.howTo === selectedMenu.howTo\r\n            && menu.menuType === selectedMenu.menuType\r\n            && menu.ingredients[menu?.ingredients?.length -1].id !== -1\r\n            && ingredientsEqual() === true)\r\n        }\r\n\r\n        return true\r\n       \r\n    },[config, menu, selectedMenu, ingredientsEqual, isValidMenu])\r\n\r\n    const onTitleChanged = React.useCallback((name: string) =>{\r\n        const data: IMenu = {...menu, name}\r\n       \r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onDescriptionChanged = React.useCallback((description: string) =>{\r\n        const data: IMenu = {...menu, description}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onHowToChanged = React.useCallback((howTo: string) =>{\r\n        const data: IMenu = {...menu, howTo}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onMenuTypeChanged = React.useCallback((value: number) =>{\r\n        const data: IMenu = {...menu, menuType: value}\r\n        setMenu(data)\r\n    },[menu])\r\n\r\n    const onIngredientChanged = React.useCallback((ingredients: IIngredient[]) =>{\r\n        setMenu({...menu, ingredients: ingredients})\r\n    },[menu, setMenu])\r\n\r\n    const menuTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1} selected={menu.menuType === MenuTypeEnum.None}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0} selected={menu.menuType === MenuTypeEnum.Pasta}>{values.recipePasta}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1} selected={menu.menuType === MenuTypeEnum.Meat}>{values.recipeMeat}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2} selected={menu.menuType === MenuTypeEnum.Soup}>{values.recipeSoup}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3} selected={menu.menuType === MenuTypeEnum.Pastries}>{values.recipePastries}</MenuItem>)\r\n\r\n        return elements\r\n    },[menu.menuType, values])\r\n\r\n    const unitTypes = React.useMemo(() => {\r\n        const elements = [] as JSX.Element[]\r\n\r\n        elements.push(<MenuItem key={-1} id ='-1' value={-1}>{values.select}</MenuItem>)\r\n        elements.push(<MenuItem key={3} id = '3' value={3}>{values.unitGram}</MenuItem>)\r\n        elements.push(<MenuItem key={2} id = '2' value={2}>{values.unitKilo}</MenuItem>)\r\n        elements.push(<MenuItem key={0} id = '0' value={0}>{values.unitLiter}</MenuItem>)\r\n        elements.push(<MenuItem key={1} id = '1' value={1}>{values.unitMilliliters}</MenuItem>)\r\n        elements.push(<MenuItem key={7} id = '7' value={7}>{values.unitPiece}</MenuItem>)\r\n        elements.push(<MenuItem key={4} id = '4' value={4}>{values.unitTablespoon}</MenuItem>)\r\n        elements.push(<MenuItem key={5} id = '5' value={5}>{values.unitTeaspoon}</MenuItem>)\r\n\r\n        return elements\r\n    },[values])\r\n\r\n    const handleAddIngredient = React.useCallback(() => {\r\n        const update: IMenu = {...menu, ingredients: menu.ingredients?? [] as IIngredient[]}\r\n        update.ingredients.push({id: -1} as IIngredient)\r\n        setMenu(update)\r\n\r\n    },[menu, setMenu])\r\n\r\n    const onCancel = React.useCallback(() =>{\r\n        setMenu({...original, ingredients: original?.ingredients?.filter(x => x.id !== -1)})\r\n    },[original, setMenu])\r\n\r\n    const onSave = React.useCallback(async () => {\r\n        await handleSave(menu)\r\n    },[menu, handleSave])\r\n\r\n    return(\r\n        <Grid\r\n            container\r\n            item\r\n            justifyContent='center'\r\n            xs={11}\r\n            xl={11}>\r\n            <Grid\r\n                container>\r\n                    <SubHeaderBar title={values.recipe} variant='h5'/>\r\n                    <MenuInputComponent\r\n                                label={values.name}\r\n                                value={menu?.name?? \"\"}\r\n                                fullWidth={true} \r\n                                isReadonly={config.isReadOnly && (config.componentKey === 'view' || config.componentKey === 'edit')}\r\n                                hasError={menuNameAlreadyExists && config.componentKey === 'add'}\r\n                                errorText={menuNameAlreadyExists && config.componentKey === 'add' ? \"Menu already exists!\" : \"\"}\r\n                                onValueChanged={onTitleChanged} />\r\n                    <MenuInputComponent\r\n                                label={values.description}\r\n                                isMultiRow={true}\r\n                                maxRows={5}\r\n                                fullWidth={true} \r\n                                value={menu?.description?? \"\"} \r\n                                isReadonly={config.isReadOnly}\r\n                                onValueChanged={onDescriptionChanged}/>\r\n                    <MenuInputComponent\r\n                                label={values.hoTo}\r\n                                isMultiRow={true}\r\n                                maxRows={20}\r\n                                fullWidth={true} \r\n                                value={menu?.howTo?? \"\"} \r\n                                isReadonly={config.isReadOnly}\r\n                                onValueChanged={onHowToChanged}/>\r\n                    <MenuInputComponent\r\n                                label={values.menuType}\r\n                                isMultiRow={true}\r\n                                maxRows={5}\r\n                                fullWidth={true} \r\n                                value={menu.menuType ?? -1} \r\n                                isReadonly={config.isReadOnly}\r\n                                hasSelect={true}\r\n                                selectElements={menuTypes}\r\n                                onSelectChanged={onMenuTypeChanged}/>\r\n            </Grid>\r\n            <Grid\r\n                item\r\n                xs={12}>\r\n                    <IngrdientList\r\n                        title={values.addIngredient} \r\n                        values={values} \r\n                        ingredients={menu.ingredients}\r\n                        unitTypes={unitTypes}\r\n                        isReadOnly= {config.isReadOnly}\r\n                        onIngredientsChanged={onIngredientChanged}\r\n                        handleAddIngredient={handleAddIngredient}/>\r\n            </Grid>\r\n            {!config.isReadOnly && (\r\n            <Grid\r\n                justifyContent='flex-end'\r\n                style={{margin: '2vw'}}\r\n                container>\r\n                    <Button disabled={disabled} onClick={onCancel}>Cancel</Button>\r\n                    <Button disabled={disabled} onClick={onSave}>Save</Button>\r\n            </Grid>\r\n            )}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default MenuContainer  "]},"metadata":{},"sourceType":"module"}