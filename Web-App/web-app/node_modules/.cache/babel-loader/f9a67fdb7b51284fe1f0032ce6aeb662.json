{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\Development\\\\WorkFolder\\\\FamilyButtler\\\\Family-Buttler\\\\Web-App\\\\web-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import useApi from'../../_hooks/useApi';import apiConfig from'../../_config/apiConfig.json';import{SetMenuCollection}from'../../_redux/_appStateStore/appStoreAccessor';import{useDispatch}from'react-redux';import MenuLayout from'./MenuLayout';import useLocalStorage from'../../_hooks/useLocalStorage';import{LocalStorageKeyEnum}from'../../_enums/localStorageKeyEnum';import{jsx as _jsx}from\"react/jsx-runtime\";var EditMenuDataService=function EditMenuDataService(){var _menuDataService$item3;var dispatch=useDispatch();var menuDataService=useApi({serviceUri:apiConfig.baseUrl+apiConfig.cookingBook.getMenuCollection,params:null});var localStorageService=useLocalStorage();var valuesUrlPrefix=React.useMemo(function(){var _localStorageService$;return\"cookingbook_cookingbook\".concat((_localStorageService$=localStorageService.getItem(LocalStorageKeyEnum.buttlerConfiguration).language)!==null&&_localStorageService$!==void 0?_localStorageService$:'En');},[localStorageService]);var valueDataService=useApi({serviceUri:apiConfig.baseUrl+apiConfig.i18nController+valuesUrlPrefix,params:null});var saveOrUpdateRecipe=React.useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(menu){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return menuDataService.post({serviceUri:apiConfig.baseUrl+apiConfig.cookingBook.addOrUpdateRecipe,method:'POST',params:menu}).then(function(){});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[menuDataService]);var component=React.useMemo(function(){var _menuDataService$item,_menuDataService$item2;var config={isReadOnly:false,hasFilter:true,hasMenuList:true,componentKey:'edit'};return/*#__PURE__*/_jsx(MenuLayout,{layoutConfig:config,menuCollection:(_menuDataService$item=(_menuDataService$item2=menuDataService.items[0])===null||_menuDataService$item2===void 0?void 0:_menuDataService$item2.menuCollection)!==null&&_menuDataService$item!==void 0?_menuDataService$item:[],values:valueDataService.items[0],handleSave:saveOrUpdateRecipe});},[menuDataService.items,valueDataService.items,saveOrUpdateRecipe]);if(menuDataService.items[0]===null){return null;}if(valueDataService.items[0]===null||valueDataService.items[0]===undefined){return null;}dispatch(SetMenuCollection((_menuDataService$item3=menuDataService.items[0])===null||_menuDataService$item3===void 0?void 0:_menuDataService$item3.menuCollection));return component;};export default EditMenuDataService;","map":{"version":3,"sources":["D:/Development/WorkFolder/FamilyButtler/Family-Buttler/Web-App/web-app/src/_pages/_cookingBook/EditMenuDataService.tsx"],"names":["React","useApi","apiConfig","SetMenuCollection","useDispatch","MenuLayout","useLocalStorage","LocalStorageKeyEnum","EditMenuDataService","dispatch","menuDataService","serviceUri","baseUrl","cookingBook","getMenuCollection","params","localStorageService","valuesUrlPrefix","useMemo","getItem","buttlerConfiguration","language","valueDataService","i18nController","saveOrUpdateRecipe","useCallback","menu","post","addOrUpdateRecipe","method","then","component","config","isReadOnly","hasFilter","hasMenuList","componentKey","items","menuCollection","undefined"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport useApi from '../../_hooks/useApi'\r\nimport { IMenu, IMenuResponse } from '../../_interfaces/IMenu'\r\nimport apiConfig from '../../_config/apiConfig.json'\r\nimport { SetMenuCollection } from '../../_redux/_appStateStore/appStoreAccessor'\r\nimport { useDispatch } from 'react-redux'\r\nimport MenuLayout from './MenuLayout'\r\nimport { IMenuLayoutConfig } from './interfaces/IMenueLayoutConfig'\r\nimport { ICookingBookValues } from '../../_interfaces/ICookingBookValues'\r\nimport useLocalStorage from '../../_hooks/useLocalStorage'\r\nimport { IButtlerConfiguration } from '../../_interfaces/IButtlerConfiguration'\r\nimport { LocalStorageKeyEnum } from '../../_enums/localStorageKeyEnum'\r\n\r\n\r\nconst EditMenuDataService: React.FC= () =>{\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const menuDataService = useApi<IMenuResponse>({serviceUri: apiConfig.baseUrl + apiConfig.cookingBook.getMenuCollection, params: null})\r\n    const localStorageService = useLocalStorage<IButtlerConfiguration>();\r\n\r\n    const valuesUrlPrefix = React.useMemo(() =>{\r\n        return `cookingbook_cookingbook${localStorageService.getItem(LocalStorageKeyEnum.buttlerConfiguration).language?? 'En'}`\r\n    },[localStorageService])\r\n\r\n    const valueDataService = useApi<ICookingBookValues>({serviceUri: apiConfig.baseUrl + apiConfig.i18nController + valuesUrlPrefix, params: null}) \r\n    \r\n    const saveOrUpdateRecipe = React.useCallback(async (menu: IMenu) =>{\r\n        await menuDataService.post({serviceUri: apiConfig.baseUrl + apiConfig.cookingBook.addOrUpdateRecipe, method: 'POST', params: menu})\r\n        .then(() =>{\r\n          \r\n        })\r\n    },[menuDataService])\r\n\r\n    const component = React.useMemo(() =>{\r\n\r\n        const config: IMenuLayoutConfig = {\r\n            isReadOnly: false, \r\n            hasFilter: true, \r\n            hasMenuList: true,\r\n            componentKey: 'edit'\r\n            }\r\n                \r\n        return <MenuLayout \r\n                    layoutConfig={config} \r\n                    menuCollection={menuDataService.items[0]?.menuCollection?? []}\r\n                    values={valueDataService.items[0]}\r\n                    handleSave={saveOrUpdateRecipe}/>\r\n         \r\n    },[menuDataService.items, valueDataService.items, saveOrUpdateRecipe])\r\n\r\n    if(menuDataService.items[0] === null){\r\n\r\n        return null\r\n    }\r\n\r\n    if(valueDataService.items[0] === null || valueDataService.items[0] === undefined){\r\n        return null\r\n    }\r\n    \r\n    dispatch(SetMenuCollection(menuDataService.items[0]?.menuCollection))\r\n   \r\n    \r\n    return component\r\n}\r\n\r\nexport default EditMenuDataService\r\n"]},"metadata":{},"sourceType":"module"}